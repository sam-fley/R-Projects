[
  {
    "objectID": "Project_1.html",
    "href": "Project_1.html",
    "title": "Project 1",
    "section": "",
    "text": "YAP ABOUT THE QUESTION AND WHAT WILL BE DONE. ABSTRACT TYPE STUFF\nCONTEXT: Hospital admins are twitchy about this stuff and care alot about how their hospitals are reated and the fluctuations. Question survey stuffs. Deal with fluctuations\n\nhere::i_am(\"Project_1.qmd\")\n\nlibrary(tidyverse)\nlibrary(tidymodels)\nlibrary(rsample)\nlibrary(janitor)\nlibrary(broom)\nlibrary(yardstick)\nlibrary(probably)\nlibrary(gt)\nlibrary(patchwork)\n\nhospital &lt;- read_csv(here::here(\"Data/HCAHPS-Hospital.csv\"), na = c(\"Not Applicable\", \"Not Available\"))\n\n\nhospital &lt;- hospital |&gt;\n  clean_names()\n\nhospital_1 &lt;- hospital |&gt;\n  select(\n    !c(\"address\", \"city_town\",\"telephone_number\", \"hcahps_answer_description\") # Not Finished\n  )\n\n\nhospital_star_rating &lt;- hospital_1 |&gt; # Star rating is a 1-5 rating of service\n  select(\n    !c(\"hcahps_answer_percent\", \"hcahps_answer_percent_footnote\", \"hcahps_linear_mean_value\" )\n  ) |&gt;\n  filter(\n    !is.na(`patient_survey_star_rating`)\n    )\n\n\nhospital_ans_perc &lt;- hospital_1 |&gt; # Answer percent is percentage of how many times that answer was chosen\n  select(\n    !c(\"patient_survey_star_rating\", \"patient_survey_star_rating_footnote\", \"hcahps_linear_mean_value\" )\n  ) |&gt;\n  filter(\n    !is.na(`hcahps_answer_percent`)\n    )\n\n\nhospital_linear_mean &lt;- hospital_1 |&gt; # linear mean is a standerdization of star rating to be out of 100\n  select(\n    !c(\"hcahps_answer_percent\", \"hcahps_answer_percent_footnote\", \"patient_survey_star_rating\", \"patient_survey_star_rating_footnote\")\n  ) |&gt;\n  filter(\n    !is.na(`hcahps_linear_mean_value`)\n    )\n\n\nhospital_star_rating_pivot &lt;- hospital_star_rating |&gt;\n  pivot_wider(id_cols = `facility_id`,\n              names_from = `hcahps_measure_id`,\n              values_from = `patient_survey_star_rating`) |&gt;\n  clean_names() |&gt;\n    rename_with(\n    \\(x) str_remove(x , \"_star_rating\")\n  )\n\nhospital_ans_perc_pivot &lt;- hospital_ans_perc |&gt;\n  pivot_wider(id_cols = `facility_id`,\n              names_from = `hcahps_measure_id`,\n              values_from = `hcahps_answer_percent`) |&gt;\n  clean_names() |&gt;\n    rename_with(\n    \\(x) str_remove(x , \"_p\")\n  )\n\nhospital_linear_mean_pivot &lt;- hospital_linear_mean |&gt;\n  pivot_wider(id_cols = `facility_id`,\n              names_from = `hcahps_measure_id`,\n              values_from = `hcahps_linear_mean_value`) |&gt;\n  clean_names() |&gt;\n  rename_with(\n    \\(x) str_remove(x , \"_linear_score\")\n  )\n\nhospital_linear_questions_pivot &lt;- hospital_linear_mean |&gt;\n  pivot_wider(id_cols = `facility_id`,\n              names_from = `hcahps_measure_id`,\n              values_from = `hcahps_question`) |&gt;\n  clean_names() |&gt;\n  rename_with(\n    \\(x) str_remove(x , \"_linear_score\")\n  ) |&gt;\n  filter(facility_id == \"010001\" )\n\n\nggplot(\n  data = hospital_linear_mean_pivot,\n  mapping = aes(x = h_hsp_rating, y = h_recmnd)\n) +\n  geom_point()\n\n\n\n\nThere is a positive correlation between the overall hospital rating and the recommendation likelihood. This makes sense since a hospital with a higher rating should be more likely to be recommended. We will be using the overall hospital rating as our response variable. We will judge the other variable to see how much they effect the overall hospital rating.\nTo analyze the data and answer our question, we will use principle component analysis.\nNo training/test set because we are not evaluating how good the predictions are. We know the model/number of components and that everything is correlated before looking at data, so no training/test set because solely for inference.\n\nlinear_model &lt;- linear_reg(mode = \"regression\", engine = \"lm\")\n\nlinear_wflow &lt;- workflow() |&gt;\n  add_model(linear_model)\n\n\npca_recipe &lt;- recipe(\n  h_recmnd ~ . , data = hospital_linear_mean_pivot\n) |&gt;\n## ~ . indicates to use all variables in the dataset as predictors besides the response\n  update_role(facility_id, new_role = \"id\") |&gt;\n  step_rm(h_hsp_rating) |&gt;\n  step_normalize(all_numeric_predictors()) |&gt;\n  step_dummy(all_nominal_predictors()) |&gt;\n  step_pca(all_predictors(), num_comp = 8)\n\nlinear_wflow &lt;- linear_wflow |&gt;\n  add_recipe(pca_recipe)\n\n\nlinear_fit &lt;- fit(linear_wflow, data = hospital_linear_mean_pivot)\n\ntidy(linear_fit)\n\n# A tibble: 9 × 5\n  term        estimate std.error statistic   p.value\n  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;\n1 (Intercept)  86.6       0.0415  2085.    0        \n2 PC1           1.75      0.0171   102.    0        \n3 PC2           0.516     0.0530     9.74  4.26e- 22\n4 PC3          -0.0430    0.0563    -0.763 4.45e-  1\n5 PC4          -0.322     0.0798    -4.04  5.56e-  5\n6 PC5          -1.19      0.0808   -14.8   7.64e- 48\n7 PC6          -0.761     0.102     -7.44  1.27e- 13\n8 PC7          -2.60      0.111    -23.5   2.14e-112\n9 PC8           0.375     0.139      2.70  7.03e-  3\n\n\n\nNote below 0.01 can be considered significant\n\n\n# Note the html-table-processing: none option in the chunk options\n# The table doesn't display with the default striping in RStudio\n# But Rendering to HTML adds it back in unless you tell it not to\ngt(\n  tidy(linear_fit),\n  rowname_col = \"term\"\n) |&gt;\n  tab_header(title = \"Significance of Components\") |&gt;\n  tab_source_note(source_note = \"XXXXXXX\") |&gt;\n  opt_align_table_header(align = \"right\") |&gt;\n  tab_style(\n    style = list(\n      cell_fill(color = \"red\", alpha = 0.2),\n      cell_text(weight = \"bold\")\n    ),\n    locations = cells_body(\n      columns = c(estimate, p.value),\n      rows = p.value &lt;= 1e-2\n    )\n  ) |&gt;\n  cols_move_to_start(p.value) |&gt;\n  cols_label(\n    p.value = \"P Value\",\n    estimate = \"Coefficient\",\n    std.error = \"Standard Error\",\n    statistic = \"Statistic\"\n  ) |&gt;\n  fmt_scientific(\n    columns = c(p.value)\n  )\n\n\n\n\n\n  \n    \n      Significance of Components\n    \n    \n    \n      \n      P Value\n      Coefficient\n      Standard Error\n      Statistic\n    \n  \n  \n    (Intercept)\n0.00\n86.61088520\n0.04154645\n2084.6758732\n    PC1\n0.00\n1.74650141\n0.01709333\n102.1744309\n    PC2\n4.26 × 10−22\n0.51565222\n0.05295927\n9.7367698\n    PC3\n4.45 × 10−1\n-0.04300362\n0.05633992\n-0.7632887\n    PC4\n5.56 × 10−5\n-0.32213805\n0.07980806\n-4.0364099\n    PC5\n7.64 × 10−48\n-1.19465901\n0.08084693\n-14.7768004\n    PC6\n1.27 × 10−13\n-0.76053765\n0.10219637\n-7.4419240\n    PC7\n2.14 × 10−112\n-2.59640022\n0.11068064\n-23.4584865\n    PC8\n7.03 × 10−3\n0.37488977\n0.13898535\n2.6973331\n  \n  \n    \n      XXXXXXX\n    \n  \n  \n\n\n\n\n\npca_prep &lt;- pca_recipe |&gt;\n  prep()\npca_prep\n\n\n\n\n── Recipe ──────────────────────────────────────────────────────────────────────\n\n\n\n\n\n── Inputs \n\n\nNumber of variables by role\n\n\noutcome:   1\npredictor: 9\nid:        1\n\n\n\n\n\n── Training information \n\n\nTraining data contained 3197 data points and no incomplete rows.\n\n\n\n\n\n── Operations \n\n\n• Variables removed: h_hsp_rating | Trained\n\n\n• Centering and scaling for: h_comp_1, h_comp_2, h_comp_3, ... | Trained\n\n\n• Dummy variables from: &lt;none&gt; | Trained\n\n\n• PCA extraction with: h_comp_1, h_comp_2, h_comp_3, h_comp_5, ... | Trained\n\n\n\npca_baked &lt;- pca_prep |&gt;\n  bake(new_data = NULL)\n\n\npca_tidy &lt;- tidy(pca_prep, 4, type = \"coef\") # tidy step 4 - the PCA step\n\n\npca_tidy |&gt;\n  filter(component %in% c(\"PC1\", \"PC2\", \"PC5\", \"PC7\")) |&gt;\n  ggplot(aes(x = value, y = terms, fill = abs(value))) +\n  geom_col() +\n  theme(legend.position = \"none\") +\n  scale_fill_gradient(low = \"black\", high = \"red\") +\n  facet_wrap(vars(component))\n\n\n\n\nNotes :\n\nPC1\n\nGood hospitals are good\n\nPC2\n\nright = prioritize quite and clean, want their environment taken care of\nleft = prioritizes information\ncomfort vs information\n\nPC3\n\nright = discharge information and cleanliness\nleft = quite and doctor communication\nclean vs quiet\n\nPC4\n\nright = didn’t answer all questions, just overall and recommending?\nleft = Discharge info, medicine communication, staff responsiveness (next steps)\n\nPC5\n\nright = medicine info, doctor communication (Info from Doctor specifically)\nleft = quiet, discharge info (want the info, but doesn’t want to be bothered)\n\nPC6\n\nright = Doctor communication, discharge information, other stuffs (talk to doctor and leave)\nleft = staff responsiveness, nurse communication (want staff to be attentive)\n\nPC7\n\nright = care transition, medicine communication (want to know what they need to do)\nleft = nurse communication, doctor communication, staff responsiveness (info about now vs after)\n\nPC8\n\nright = communication about medicines\nleft = care transition\nmedicines vs life style changes\n\nPC9\n\nright = Nurse communication\nleft = Staff responsiveness\n\n\nDELETE THIS, DO PRINCIPLE COMPONENT ANALYSIS"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Index",
    "section": "",
    "text": "I am Sam Fleyshman."
  },
  {
    "objectID": "index.html#test",
    "href": "index.html#test",
    "title": "Index",
    "section": "Test",
    "text": "Test"
  }
]